!function(a){function b(d){if(c[d])return c[d].exports;var e=c[d]={exports:{},id:d,loaded:!1};return a[d].call(e.exports,e,e.exports,b),e.loaded=!0,e.exports}var c={};return b.m=a,b.c=c,b.p="",b(0)}([function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function d(){this.gallery=new g(this),this.gallery.render()}var e=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a},f=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),g=function(){function a(b){c(this,a),this.rootElement=$(b),this.container=$(this.selectors.itemName,this.rootElement).parent(),this.items=$(this.selectors.itemName,this.container),this.positions=[],this.touchStart={},this.touchPrev={},this.duplicateClass="duplicate",this.centerFirstItem=!1!==this.rootElement.data("center-first-item"),this.focusSingleItem=!1!==this.rootElement.data("focus-single-item"),this.resizeHandler=null,this.numberOfItemsToPreload=0,this.items.each(function(a,b){$(b).attr("data-number",a+1)}),this.items.length<2&&this.handleEdgecases(),this.registerEvent(window,"resize",this.onResize.bind(this)),this.registerEvent(this.selectors.leftPager,"click",this.onPage.bind(this,"left")),this.registerEvent(this.selectors.rightPager,"click",this.onPage.bind(this,"right")),this.registerEvent(this.rootElement,"touchstart",this.onTouchStart.bind(this)),this.registerEvent(this.rootElement,"touchmove",this.onTouchMove.bind(this)),this.registerEvent(this.rootElement,"touchend",this.onTouchEnd.bind(this))}return f(a,[{key:"registerEvent",value:function(a,b,c){return $(a).on(b,c)}},{key:"onResize",value:function(){this.resizeHandler&&clearTimeout(this.resizeHandler),this.resizeHandler=setTimeout(this.render.bind(this),500)}},{key:"onPage",value:function(a){"left"===a&&this.moveLeft(),"right"===a&&this.moveRight(),this.positionItems(),this.loadImages(),this.triggerChange()}},{key:"onTouchStart",value:function(a){var b=$(a.target);this.items.addClass("no-transition"),this.resetTouch(),b.hasClass("right")||b.hasClass("left")||(this.touchStart=this.getTouchCoords(a),this.touchPrev=this.touchStart)}},{key:"onTouchMove",value:function(a){if(this.isSwiping()){var b=this.getTouchCoords(a),c=Math.abs(b.x-this.touchStart.x),d=Math.abs(b.y-this.touchStart.y);if(d>c)this.items.removeClass("no-transition"),this.positionItems(),this.resetTouch();else{a.preventDefault();var e=b.x-this.touchPrev.x;this.touchPrev=b,this.moveItems(e)}}}},{key:"onTouchEnd",value:function(a){if(this.items.removeClass("no-transition"),this.isSwiping()){for(var b=this.getTouchCoords(a.changedTouches[0]),c=this.touchStart.x-b.x,d=Math.abs(c),e=Math.ceil(d/this.itemWidth),f=0;e>f;f++)c>0?(this.moveRight(),this.loadImages(),this.triggerChange()):0>c&&(this.moveLeft(),this.loadImages(),this.triggerChange());this.positionItems()}}},{key:"triggerChange",value:function(){this.rootElement.trigger("as24-gallery:change",[])}},{key:"getTouchCoords",value:function(a){var b=a.touches&&a.touches[0];return{x:a.clientX||b&&b.clientX,y:a.clientY||b&&b.clientY}}},{key:"resetTouch",value:function(){this.touchStart={},this.touchPrev={}}},{key:"isSwiping",value:function(){return Object.keys(this.touchStart).length>0}},{key:"positionItems",value:function(){var a=this;this.items.each(function(b,c){$(c).css("left",a.positions[b])})}},{key:"resizeOverlays",value:function(){var a=$(this.selectors.rightPager+", "+this.selectors.leftPager,this.rootElement),b=parseInt(a.css("min-width"));b+=parseInt(this.items.first().css("margin-left")),a.toggleClass("pagination-small",this.itemWidth+2*b>=this.container.width());var c=0;if(this.items.length>1){var d=this.items.first();c=this.rootElement[0].clientWidth/2-this.itemWidth/2,c-=parseInt(d.css("margin-left"))}a.css("width",c)}},{key:"fillItems",value:function(){var a=this.items.length,b=1;if(!(2>a)){a>2&&(b=this.container.get(0).clientWidth-a*this.itemWidth);for(var c=Math.ceil(Math.ceil(b/this.itemWidth)/a)*a,d=a,e=1;c>=e;e++){var f=e%a;f=f||a,d+=1;var g=$('[data-number="'+f+'"]').clone().data("number",d).addClass(this.duplicateClass),h=$('[data-number="'+(d-1)+'"]');h.after(g)}this.items=$(this.selectors.itemName,this.container)}}},{key:"showPageInfo",value:function(){var a=this.items.filter(".duplicate"),b=this.items.length-a.length,c=this.centerFirstItem?Math.ceil(this.items.length/2):1,d=$(this.items[c-1]).data("number"),e=d%b||b;$(this.selectors.pager,this.rootElement).html(e+"/"+b)}},{key:"calculateItemWidth",value:function(){var a=this.items.first(),b=0;return a.length>0&&(b=a.width(),b+=parseInt(a.css("margin-left"),10),b+=parseInt(a.css("margin-right"),10)),b}},{key:"handleEdgecases",value:function(){$(this.selectors.leftPager+", "+this.selectors.rightPager+", "+this.selectors.pager,this.rootElement).hide(),0===this.items.length&&$(".placeholder",this.rootElement).show()}},{key:"positionElements",value:function(a){var b=this,c=this.items.length,d=Math.ceil(this.items.length/2),e=this.centerFirstItem?(this.container.get(0).clientWidth-this.itemWidth)/2:0;a&&this.items.each(function(a,d){c/2>=a&&b.container.append(d)}),this.items=$(this.selectors.itemName,this.container),this.positions=[],this.items.each(function(a,c){var f=a+1-d,g=e+f*b.itemWidth;b.positions.push(g),$(c).css("left",g)}),$(this.selectors.pager,this.rootElement).css("left",e+parseInt(this.items.first().css("margin-left"),10)),this.showPageInfo(),this.loadImages()}},{key:"loadImages",value:function(){var a=this,b=this.items.length,c=Math.ceil(b/2),d=(this.container.get(0).clientWidth-this.itemWidth)/2;this.items.each(function(b,e){var f=b+1-c,g=d+f*a.itemWidth;if(g+a.itemWidth+a.numberOfItemsToPreload*a.itemWidth>0&&g-a.numberOfItemsToPreload*a.itemWidth<a.container.width()){var h=$("[data-src]",e);h.length>0&&(h[0].src=h.data("src"),h.attr("data-src",null))}})}},{key:"moveLeft",value:function(){this.items.last().insertBefore(this.items.first()),this.items=$(this.selectors.itemName,this.container),this.showPageInfo()}},{key:"moveRight",value:function(){this.items.first().insertAfter(this.items.last()),this.items=$(this.selectors.itemName,this.container),this.showPageInfo()}},{key:"moveItems",value:function(a){var b=void 0,c=this.itemWidth;this.items.each(function(d,e){b||(b=parseInt($(e).css("left"))),$(e).css("left",b+d*c+a)})}},{key:"render",value:function(){var a=arguments.length<=0||void 0===arguments[0]?!1:arguments[0];this.itemWidth=this.calculateItemWidth(),this.fillItems(),this.positionElements(a),this.focusSingleItem&&this.resizeOverlays()}},{key:"redraw",value:function(){this.render(!0)}},{key:"selectors",get:function(){return{itemName:"as24-gallery-item",leftPager:".left",rightPager:".right",pager:".pager"}}},{key:"preloadItems",get:function(){return this.rootElement.data("preload-items")||0}}]),a}(),h="as24-gallery";try{a.exports=document.registerElement(h,{prototype:e(Object.create(HTMLElement.prototype,{createdCallback:{value:d}}))})}catch(i){window&&window.console&&window.console.warn('Failed to register CustomElement "'+h+'".',i)}}]);
//# sourceMappingURL=showcar-gallery.min.js.map