!function(a){function b(d){if(c[d])return c[d].exports;var e=c[d]={exports:{},id:d,loaded:!1};return a[d].call(e.exports,e,e.exports,b),e.loaded=!0,e.exports}var c={};return b.m=a,b.c=c,b.p="",b(0)}([function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(){this.gallery=new u(this),this.gallery.render()}var f=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a},g=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),h=c(1),i=c(2),j=i.on,k=i.hide,l=i.show,m=i.appendTo,n=i.toggleClass,o=i.getWidth,p=i.getCSS,q=i.setCSS,r=i.addClass,s=i.removeClass,t=i.containsClass,u=function(){function a(b){d(this,a),h(),this.rootElement=b,this.galleryID=this.rootElement.getAttribute("data-id")||Math.random().toString(16).substr(2),this.container=this.rootElement.querySelector(this.selectors.itemName).parentElement,this.items=this.container.querySelectorAll(this.selectors.itemName),this.positions=[],this.touchStart={},this.touchPrev={},this.duplicateClass="duplicate",this.centerFirstItem="false"!==this.rootElement.getAttribute("data-center-first-item"),this.focusSingleItem="false"!==this.rootElement.getAttribute("data-focus-single-item"),this.resizeHandler=null,this.numberOfItemsToPreload=0,Array.prototype.forEach.call(this.items,function(a,b){a.setAttribute("data-number",b+1)}),this.items.length<2&&this.handleEdgecases(),this.registerEvent(window,"resize",this.onResize.bind(this)),this.registerEvent(this.rootElement.querySelector(this.selectors.leftPager),"click",this.onPage.bind(this,"left")),this.registerEvent(this.rootElement.querySelector(this.selectors.rightPager),"click",this.onPage.bind(this,"right")),this.registerEvent(this.rootElement,"touchstart",this.onTouchStart.bind(this)),this.registerEvent(this.rootElement,"touchmove",this.onTouchMove.bind(this)),this.registerEvent(this.rootElement,"touchend",this.onTouchEnd.bind(this))}return g(a,[{key:"registerEvent",value:function(a,b,c){return j(c,b,a)}},{key:"onResize",value:function(){this.resizeHandler&&clearTimeout(this.resizeHandler),this.resizeHandler=setTimeout(this.render.bind(this),500)}},{key:"onPage",value:function(a){"left"===a&&this.moveLeft(),"right"===a&&this.moveRight(),this.positionItems(),this.loadImages(),this.triggerChange()}},{key:"onTouchStart",value:function(a){var b=a.target;Array.prototype.forEach.call(this.items,function(a){return r("no-transition",a)}),this.resetTouch(),t("right",b)||t("left",b)||(this.touchStart=this.getTouchCoords(a),this.touchPrev=this.touchStart)}},{key:"onTouchMove",value:function(a){if(this.isSwiping()){var b=this.getTouchCoords(a),c=Math.abs(b.x-this.touchStart.x),d=Math.abs(b.y-this.touchStart.y);if(d>c)Array.prototype.forEach.call(this.items,function(a){return s("no-transition",a)}),this.positionItems(),this.resetTouch();else{a.preventDefault();var e=b.x-this.touchPrev.x;this.touchPrev=b,this.moveItems(e)}}}},{key:"onTouchEnd",value:function(a){if(Array.prototype.forEach.call(this.items,function(a){return s("no-transition",a)}),this.isSwiping()){for(var b=this.getTouchCoords(a.changedTouches[0]),c=this.touchStart.x-b.x,d=Math.abs(c),e=Math.ceil(d/this.itemWidth),f=0;e>f;f++)c>0?(this.moveRight(),this.loadImages(),this.triggerChange()):0>c&&(this.moveLeft(),this.loadImages(),this.triggerChange());this.positionItems()}}},{key:"triggerChange",value:function(){var a=new CustomEvent("as24-gallery:change",{detail:{id:this.galleryID}});window.document.dispatchEvent(a)}},{key:"getTouchCoords",value:function(a){var b=a.touches&&a.touches[0];return{x:a.clientX||b&&b.clientX,y:a.clientY||b&&b.clientY}}},{key:"resetTouch",value:function(){this.touchStart={},this.touchPrev={}}},{key:"isSwiping",value:function(){return Object.keys(this.touchStart).length>0}},{key:"positionItems",value:function(){var a=this;Array.prototype.forEach.call(this.items,function(b,c){q("left",a.positions[c]+"px",b)})}},{key:"resizeOverlays",value:function(){var a=this.rootElement.querySelector(this.selectors.rightPager),b=this.rootElement.querySelector(this.selectors.leftPager),c=parseInt(p("min-width",a),10),d=parseInt(p("min-width",b),10),e=Math.min(c,d);e+=parseInt(p("margin-left",this.items[0]),10),this.itemWidth+2*e>=o(this.container)&&(n("pagination-small",a),n("pagination-small",b));var f=0;if(this.items.length>1){var g=this.items[0];f=this.rootElement.clientWidth/2-this.itemWidth/2,f-=parseInt(p("margin-left",g),10)}q("width",f+"px",a),q("opacity",100,a),q("width",f+"px",b),q("opacity",100,b)}},{key:"fillItems",value:function(){var a=this.items.length,b=1;if(!(2>a)){a>2&&(b=this.container.clientWidth-a*this.itemWidth);for(var c=Math.ceil(Math.ceil(b/this.itemWidth)/a)*a,d=a,e=1;c>=e;e++){var f=e%a;f=f||a,d+=1;var g=this.rootElement.querySelector('[data-number="'+f+'"]').cloneNode(!0);g.dataset.number=d,r(this.duplicateClass,g);var h=this.rootElement.querySelector('[data-number="'+(d-1)+'"]');h.parentNode.appendChild(g)}this.items=this.container.querySelectorAll(this.selectors.itemName)}}},{key:"showPageInfo",value:function(){var a=Array.prototype.filter.call(this.items,function(a){return t(".duplicate",a)}),b=this.items.length-a.length,c=this.centerFirstItem?Math.ceil(this.items.length/2):1,d=this.items[c-1].dataset.number,e=d%b||b;this.rootElement.querySelector(this.selectors.pager).innerHTML=e+"/"+b}},{key:"calculateItemWidth",value:function(){var a=this.items[0],b=0;return a&&(b=o(a),b+=parseInt(p("margin-left",a),10),b+=parseInt(p("margin-right",a),10)),b}},{key:"handleEdgecases",value:function(){k(this.selectors.leftPager),k(this.selectors.rightPager),k(this.selectors.pager),k(this.rootElement),0===this.items.length&&l(this.rootElement.querySelector(".placeholder"))}},{key:"positionElements",value:function(a){var b=this,c=this.items.length,d=Math.ceil(this.items.length/2),e=this.centerFirstItem?(this.container.clientWidth-this.itemWidth)/2:0;a&&Array.prototype.forEach.call(this.items,function(a,d){c/2>=d&&m(b.container,a)}),this.items=this.container.querySelectorAll(this.selectors.itemName),this.positions=[],Array.prototype.forEach.call(this.items,function(a,c){var f=c+1-d,g=e+f*b.itemWidth;b.positions.push(g),q("left",g+"px",a)});var f=e+this.itemWidth/2-30+"px";q("left",f,this.rootElement.querySelector(this.selectors.pager)),this.showPageInfo(),this.loadImages()}},{key:"loadImages",value:function(){var a=this,b=this.items.length,c=Math.ceil(b/2),d=(this.container.clientWidth-this.itemWidth)/2;Array.prototype.forEach.call(this.items,function(b,e){var f=e+1-c,g=d+f*a.itemWidth;if(g+a.itemWidth+a.numberOfItemsToPreload*a.itemWidth>0&&g-a.numberOfItemsToPreload*a.itemWidth<o(a.container)){var h=b.querySelector("[data-src]");h&&h.hasAttribute("data-src")&&(h.src=h.getAttribute("data-src"),h.removeAttribute("data-src"))}})}},{key:"moveLeft",value:function(){var a=this.items[this.items.length-1],b=a.parentNode;b.insertBefore(a,b.firstChild),this.items=this.container.querySelectorAll(this.selectors.itemName),this.showPageInfo()}},{key:"moveRight",value:function(){var a=this.items[0].parentNode;a.appendChild(a.removeChild(this.items[0])),this.items=this.container.querySelectorAll(this.selectors.itemName),this.showPageInfo()}},{key:"moveItems",value:function(a){var b=void 0,c=this.itemWidth;Array.prototype.forEach(function(d,e){b||(b=parseInt(p("left",d),10)),q("left",b+e*c+a+"px",d)})}},{key:"render",value:function(){var a=arguments.length<=0||void 0===arguments[0]?!1:arguments[0];this.itemWidth=this.calculateItemWidth(),this.fillItems(),this.positionElements(a),this.focusSingleItem&&this.resizeOverlays()}},{key:"redraw",value:function(){this.render(!0)}},{key:"selectors",get:function(){return{itemName:"as24-gallery-item",leftPager:"as24-gallery .left",rightPager:"as24-gallery .right",pager:"as24-gallery .pager"}}},{key:"preloadItems",get:function(){return parseInt(this.rootElement.getAttribute("data-preload-items")||"0",10)}}]),a}(),v="as24-gallery";try{a.exports=document.registerElement(v,{prototype:f(Object.create(HTMLElement.prototype,{createdCallback:{value:e}}),{redraw:function(){this.gallery.redraw()}})})}catch(w){window&&window.console&&window.console.warn('Failed to register CustomElement "'+v+'".',w)}},function(a,b){"use strict";a.exports=function(){function a(a,b){b=b||{bubbles:!1,cancelable:!1,detail:void 0};var c=document.createEvent("CustomEvent");return c.initCustomEvent(a,b.bubbles,b.cancelable,b.detail),c}return"function"==typeof window.CustomEvent?!1:(a.prototype=window.Event.prototype,void(window.CustomEvent=a))}},function(a,b){"use strict";function c(a,b){var c=[],d=b.getAttribute("class");return d?(c=d.split(" "),-1===c.indexOf(a)&&(d=c.concat(a).join(" "))):d=a,b.setAttribute("class",d),b}function d(a,b){var c=[],d=b.getAttribute("class");return d&&(c=d.split(" "),-1!==c.indexOf(a)&&c.splice(c.indexOf(a),1),b.setAttribute("class",c.join(" "))),b}function e(a,b){var c=[],d=b.getAttribute("class");return d&&(c=d.split(" ")),c.indexOf(a)>-1}function f(a,b){e(a,b)?d(a,b):c(a,b)}function g(a){return a.style.display="none",a}function h(a){return a.style.display="block",a}function i(a,b,c){return c.addEventListener?c.addEventListener(b,a):c.attachEvent("on"+b,a)}function j(a,b,c){return c.style[a]=b,c}function k(a,b){var c=window.getComputedStyle(b,null);return c.getPropertyValue(a)}function l(a){return a.getBoundingClientRect().width}function m(a,b){return a.appendChild(b),a}a.exports={on:i,setCSS:j,getCSS:k,addClass:c,hide:g,show:h,appendTo:m,removeClass:d,containsClass:e,toggleClass:f,getWidth:l}}]);
//# sourceMappingURL=showcar-gallery.min.js.map