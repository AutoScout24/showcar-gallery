!function(a){function b(d){if(c[d])return c[d].exports;var e=c[d]={exports:{},id:d,loaded:!1};return a[d].call(e.exports,e,e.exports,b),e.loaded=!0,e.exports}var c={};return b.m=a,b.c=c,b.p="",b(0)}([function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function d(a,b){var c=[],d=b.getAttribute("class");return d?(c=d.split(" "),-1===c.indexOf(a)&&(d=c.concat(a).join(" "))):d=a,b.setAttribute("class",d),b}function e(a,b){var c=[],d=b.getAttribute("class");return d&&(c=d.split(" "),-1!==c.indexOf(a)&&c.splice(c.indexOf(a),1),b.setAttribute("class",c.join(" "))),b}function f(a,b){var c=[],d=b.getAttribute("class");return d&&(c=d.split(" ")),c.indexOf(a)>-1}function g(){this.carousel.redraw()}function h(){this.carousel=new l(this)}function i(){var a=this;this.carousel.init(),window.addEventListener("resize",function(){clearTimeout(g),setTimeout(g.bind(a),300)})}var j=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a},k=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),l=function(){function a(b){c(this,a),this.element=b,this.container=null,this.pagination={left:null,right:null},this.index=0,this.refWidth=330,this.itemWidth=330,this.touchStart={},this.touchPrev={},this.speed=a.Speed.SLOW,this.pager=document.createElement("a"),d("as24-pagination",this.pager),d("hide",this.pager),this.pager.href="#",this.element.addEventListener("touchstart",this.touchStartEventHandler.bind(this)),this.element.addEventListener("touchmove",this.touchMoveEventHandler.bind(this)),this.element.addEventListener("touchend",this.touchEndEventHandler.bind(this))}return k(a,[{key:"init",value:function(){this.addContainer(),this.resizeItems(),this.addPagination(),this.calculateEnvironment(),this.loadImages()}},{key:"redraw",value:function(){this.index=0,this.resizeItems(),this.calculateEnvironment(),this.setPaginationButtonsVisibility(),this.loadImages(),this.moveContainer(0)}},{key:"resizeItems",value:function(){var a=this;this.orgWidth=this.items[0].getBoundingClientRect().width+20,this.orgWidth===this.refWidth&&this.element.offsetWidth<this.refWidth?(this.itemWidth=this.element.offsetWidth-20,[].forEach.call(this.items,function(b){return b.style.width=a.itemWidth-20+"px"})):this.itemWidth=this.items[0].getBoundingClientRect().width+20}},{key:"touchStartEventHandler",value:function(a){var b=a.target;this.resetTouch(),f("as24-pagination",b)||(this.touchStart=this.getTouchCoords(a),this.touchPrev=this.touchStart)}},{key:"touchMoveEventHandler",value:function(a){if(this.isSwiping()){var b=this.getTouchCoords(a),c=Math.abs(b.x-this.touchStart.x),d=Math.abs(b.y-this.touchStart.y);d>c?this.resetTouch():(a.preventDefault(),this.touchPrev=b)}}},{key:"touchEndEventHandler",value:function(b){if(this.isSwiping())for(var c=this.getTouchCoords(b.changedTouches[0]),d=this.touchStart.x-c.x,e=Math.abs(d),f=Math.ceil(e/this.itemWidth),g=0;f>g;g++)d>0?this.paginate(a.Direction.RIGHT):0>d&&this.paginate(a.Direction.LEFT)}},{key:"getTouchCoords",value:function(b){var c=b.touches&&b.touches[0];return new a.Coordinate(b.clientX||c&&c.clientX,b.clientY||c&&c.clientY)}},{key:"resetTouch",value:function(){this.touchStart={},this.touchPrev={}}},{key:"isSwiping",value:function(){return Object.keys(this.touchStart).length>0}},{key:"calculateEnvironment",value:function(){this.itemsLength=this.container.children.length,this.itemsVisible=Math.floor(this.element.offsetWidth/this.itemWidth),this.totalReach=this.container.offsetWidth-this.element.offsetWidth,this.stepLength=this.speed===a.Speed.SLOW?this.itemsLength-this.itemsVisible:Math.ceil(this.itemsLength/this.itemsVisible),this.stepWidth=this.speed===a.Speed.SLOW?this.itemWidth:Math.floor(this.element.offsetWidth/this.itemWidth)*this.itemWidth}},{key:"getNewIndex",value:function(b){b===a.Direction.LEFT&&this.index>0?this.index-=1:b===a.Direction.RIGHT&&this.index<this.stepLength&&(this.index+=1)}},{key:"addContainer",value:function(){var a=this,b=document.createElement("div");d("as24-carousel-wrapper",b),this.container=document.createElement("div"),d("as24-carousel-container",this.container),[].forEach.call(this.element.children,function(b){var c=b.cloneNode(!0);a.container.appendChild(c)}),b.appendChild(this.container),this.element.innerHTML="",this.element.appendChild(b)}},{key:"addPagination",value:function(){for(var b=[a.Direction.LEFT,a.Direction.RIGHT],c=0;c<b.length;c++){var d=b[c];this.createPaginationButton(d)}e("hide",this.pagination.right)}},{key:"createPaginationButton",value:function(a){var b=this,c=this.pagination[a]=this.pager.cloneNode(!0);c.setAttribute("data-direction",a),c.addEventListener("mouseup",function(c){c.stopPropagation(),c.preventDefault(),b.paginate(a)}),c.addEventListener("click",function(a){return a.preventDefault()}),this.element.appendChild(c)}},{key:"paginate",value:function(a){this.getNewIndex(a);var b=this.calculateDistance();this.setPaginationButtonsVisibility(),this.loadImages(),this.moveContainer(b)}},{key:"calculateDistance",value:function(){var a=this.index*this.stepWidth;return a=a>this.totalReach?this.totalReach:a,~a+1}},{key:"moveContainer",value:function(a){a=0|a,this.container.style.transform="translate3d("+a+"px, 0, 0)",this.container.style.webkitTransform="translate3d("+a+"px, 0, 0)"}},{key:"setPaginationButtonsVisibility",value:function(){0===this.index?d("hide",this.pagination.left):e("hide",this.pagination.left),this.index===this.stepLength?d("hide",this.pagination.right):e("hide",this.pagination.right)}},{key:"loadImages",value:function(){var b=this.index,c=Math.ceil(this.element.offsetWidth/this.itemWidth),d=this.speed===a.Speed.SLOW?this.index+c:(this.index+1)*c;d=d>this.itemsLength?this.itemsLength:d;for(var e=b;d>e;e++){var f=this.container.children[e].querySelectorAll("img");[].forEach.call(f,function(a){var b=a.getAttribute("data-src");null!==b&&(a.setAttribute("src",b),a.removeAttribute("data-src"))})}}},{key:"items",get:function(){return this.element.querySelectorAll("as24-carousel-item")}}]),a}();l.Direction={LEFT:"left",RIGHT:"right"},l.Speed={SLOW:"slow",FAST:"fast"},l.Coordinate=function(){var a=arguments.length<=0||void 0===arguments[0]?0:arguments[0],b=arguments.length<=1||void 0===arguments[1]?0:arguments[1];return{x:a,y:b}};try{document.registerElement("as24-carousel",{prototype:j(Object.create(HTMLElement.prototype,{createdCallback:{value:h},attachedCallback:{value:i}}),{redraw:function(){this.carousel.redraw()}})})}catch(m){window&&window.console&&window.console.warn('Failed to register CustomElement "as24-carousel".',m)}}]);
//# sourceMappingURL=showcar-carousel.min.js.map